<body style="margin:0">
    <input type="file" id="filein" name="filein" accept="image/png, image/jpeg" />
    <canvas style="width:100vw;height:100vh"></canvas>
    <script>
        var h, w, d, g, v, f, p, s, c = document.querySelector('canvas'), r = new Date().getTime();
        v = `attribute vec3 p;void main(){gl_Position=vec4(p,1);}`;
        f = `
            precision highp float;
            uniform float t;
            uniform vec2 r;
            void main(){
                vec2 position = - 1.0 + 2.0 * gl_FragCoord.xy / r;
                vec3 col = vec3(
                    abs( sin( position.x * position.y + t / 5.0 ) ),
                    abs( sin( position.x * position.y + t / 4.0 ) ),
                    abs( sin( position.x * position.y + t / 3.0 ) )
                );
                gl_FragColor=vec4(col,1);
            }
        `;
        g = c.getContext('experimental-webgl');
        g.bindBuffer(34962, g.createBuffer());
        g.bufferData(34962, new Float32Array([-3, -1, 3, -1, 0, 2]), 35044);
        p = g.createProgram();
        g.attachShader(p, k(v, 35633));
        g.attachShader(p, k(f, 35632));
        g.linkProgram(p);
        x();
        function x() {
            if (w != c.clientWidth || h != c.clientHeight) {
                w = c.clientWidth;
                h = c.clientHeight;
                c.width = w;
                c.height = h;
                g.viewport(0, 0, w, h)
            } g.useProgram(p);
            g.uniform1f(g.getUniformLocation(p, 't'), (new Date().getTime() - r) / 1e3);
            g.uniform2f(g.getUniformLocation(p, 'r'), w, h);
            g.vertexAttribPointer(s, 2, 5126, 0, 0, 0);
            g.enableVertexAttribArray(s);
            g.drawArrays(4, 0, 3);
            requestAnimationFrame(x)
        } function k(q, e) {
            d = g.createShader(e);
            g.shaderSource(d, q);
            g.compileShader(d);
            return d
        }
    </script>
</body>